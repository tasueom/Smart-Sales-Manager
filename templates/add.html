{% extends "layout.html" %}

{% block title %}
    매출 정보 입력
{% endblock %}

{% block content %}
<h2>매출 정보 입력</h2>
<form action="{{ url_for('add') }}" method="post">
    <div>
        <label for="saledate">판매일자:</label>
        <input type="date" id="saledate" name="saledate" value="{{ (now or '')[:10] if now else '' }}" required>
    </div>
    <div>
        <label for="name">품목명:</label>
        <select id="name" name="name" required>
            <option value="" disabled selected hidden>품목명</option>
            <option value="노트북">노트북</option>
            <option value="마우스">마우스</option>
            <option value="키보드">키보드</option>
            <option value="모니터">모니터</option>
            <option value="프린터">프린터</option>
        </select>
    </div>
    <div>
        <label for="quantity">수량:</label>
        <input type="number" id="quantity" name="quantity" min="1" required>
    </div>
    <div>
        <label for="price">단가:</label>
        <input type="number" id="price" name="price" min="0" required>
    </div>
    <div>
        <button type="submit">등록</button>
    </div>
</form>
<h2>CSV로 등록하기</h2>
<form action="{{ url_for('upload_csv') }}" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".csv" required><br>
    <button type="submit">업로드</button>
</form>
<script>
// 오늘 날짜 yyyy-mm-dd 포맷으로 input에 디폴트값 자동 설정
(function() {
    var today = new Date();
    var yyyy = today.getFullYear();
    var mm = String(today.getMonth() + 1).padStart(2, '0');
    var dd = String(today.getDate()).padStart(2, '0');
    var formatted = yyyy + '-' + mm + '-' + dd;
    var saledateInput = document.getElementById('saledate');
    if (saledateInput && !saledateInput.value) {
        saledateInput.value = formatted;
    }
})();
</script>

{% endblock %}